:root{--bg:#0f1420;--fg:#e9eef7;--muted:#b8c2d9;--card:#151c2c;--line:#23314d;--accent:#4da3ff}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--fg);font:14px/1.5 system-ui,Segoe UI,Roboto,Arial}
header{display:flex;align-items:center;gap:12px;padding:16px 20px;border-bottom:1px solid var(--line);position:sticky;top:0;background:linear-gradient(0deg,rgba(15,20,32,.85),rgba(15,20,32,.85));backdrop-filter: blur(8px)}
.brand{display:flex;align-items:center;gap:10px;color:inherit;text-decoration:none}
header img{height:28px}
h1{font-size:18px;margin:0}
.tabs{display:flex;gap:12px;margin-left:12px}
.tabs a{color:var(--muted);text-decoration:none;padding:6px 10px;border-radius:8px}
.tabs a.active{color:var(--fg);background:#0e1524;border:1px solid var(--line)}
.pill{padding:4px 8px;border-radius:999px;border:1px solid var(--line);font-size:12px;color:var(--muted);margin-left:auto}
.wrap{padding:20px;max-width:1300px;margin:auto}
.grid{display:grid;gap:16px}
.grid.cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}
.grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
@media (max-width:1100px){.grid.cols-4{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media (max-width:700px){.grid.cols-4,.grid.cols-2{grid-template-columns:1fr}}
.card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:14px}
/* Altura fija para charts: evita que el layout se mueva */
:root { --chart-h: 300px; }  /* podÃ©s subir a 320 si querÃ©s */
/* Ocupa 2 columnas en grids de 2 cols o mÃ¡s */
.span-2 { grid-column: span 2; }

/* Un poco mÃ¡s alto para el line chart */
.chart-box.tall{
  height: 360px;
  max-height: 360px;
}
.chart-box{
  height: var(--chart-h);
  max-height: var(--chart-h);
  position: relative;
  overflow: hidden;   /* por si el plugin de labels se pasa 1-2px */
}

/* El canvas ocupa todo el contenedor, y NUNCA cambia su alto */
.chart-box canvas{
  display: block;
  width: 100% !important;
  height: 100% !important;     /* ðŸ”’ */
  max-height: 100% !important; /* ðŸ”’ */
}
.chart-box{ position:relative; width:100%; }
/* Wrapper de alto fijo para charts */
.chart-h280 { height: 280px; }
.chart-h320 { height: 320px; }
.chart-h360 { height: 360px; }

/* MUY IMPORTANTE: el canvas debe estirar al 100% del alto de su wrapper */
.card .chart-h280 canvas,
.card .chart-h320 canvas,
.card .chart-h360 canvas,
.card canvas {
  display: block;
  width: 100% !important;
  height: 100% !important;   /* rompe el height:auto global si lo hubiera */
}

/* Si en algÃºn momento pusimos un reset como este, anularlo o dejarlo asÃ­: */
/* canvas { height: auto; }   <-- Evitarlo para charts */
/* Contenedor dividido: 2/3 grÃ¡fico â€“ 1/3 tabla */
.split-2-1 {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 16px;               /* respeta el mismo gap de tus grids */
}

/* Pane genÃ©rico dentro de la card */
.pane {
  display: flex;
  flex-direction: column;
  min-height: 320px;
}

/* El grÃ¡fico crece a todo lo disponible */
.pane.plot canvas {
  width: 100% !important;
  height: 100% !important;
}

/* Lado derecho: tabla */
.pane.side { overflow: auto; }
.side-title { margin: 0 0 8px 0; font-size: 0.95rem; opacity: .85; }

/* Tabla compacta a la derecha */
.table.compact {
  width: 100%;
  border-collapse: collapse;
}
.table.compact thead th {
  font-weight: 600;
  text-align: left;
  padding: 6px 8px;
  border-bottom: 1px solid rgba(255,255,255,.08);
}
.table.compact tbody td {
  padding: 6px 8px;
  border-bottom: 1px dashed rgba(255,255,255,.06);
}
.table.compact td.num { text-align: right; }

/* Responsive: apilar cuando sea angosto */
@media (max-width: 1100px) {
  .split-2-1 {
    grid-template-columns: 1fr;
  }
  .pane { min-height: 260px; }
}

/* Fila de 2 columnas con mÃ¡s espacio para el grÃ¡fico */
.row-plot-table{
  display: grid;
  grid-template-columns: 3fr 1fr; /* 75% / 25% */
  gap: 16px;
  min-height: 340px;
}

/* Columna genÃ©rica */
.row-plot-table .col {
  display: flex;
  flex-direction: column;
}

/* GrÃ¡fico ocupa todo el alto disponible */
.row-plot-table .plot canvas {
  width: 100% !important;
  height: 100% !important;
}

/* Tabla derecha */
.table-side { overflow: auto; }
.side-title { margin: 0 0 8px 0; font-size: .95rem; opacity: .85; }

.table.compact {
  width: 100%;
  border-collapse: collapse;
}
.table.compact thead th {
  padding: 6px 8px;
  text-align: left;
  font-weight: 600;
  border-bottom: 1px solid rgba(255,255,255,.08);
}
.table.compact tbody td {
  padding: 6px 8px;
  border-bottom: 1px dashed rgba(255,255,255,.06);
}
.table.compact td.num { text-align: right; }

/* Responsivo: apila cuando es angosto */
@media (max-width: 1100px) {
  .row-plot-table {
    grid-template-columns: 1fr;
    min-height: 280px;
  }
}

/* toolbar con dos tÃ­tulos alineados */
.toolbar.dual {
  display: flex;
  align-items: center;
  gap: 12px;
}
.toolbar.dual .title-left {
  margin: 0;
}
.toolbar.dual .title-right {
  margin: 0 0 0 auto;   /* se va a la derecha */
  opacity: .9;
  font-weight: 600;
}

/* fila con grÃ¡fico + tabla */
.row-plot-table {
  display: grid;
  grid-template-columns: 1fr 320px; /* 75% / 25% aprox. (ajustÃ¡ 320px si querÃ©s) */
  gap: 16px;
  align-items: stretch; /* ambas columnas comparten la altura */
}

/* el canvas gobierna la altura de la tarjeta */
.col.plot {
  min-height: 340px;          /* altura mÃ­nima cÃ³moda */
}
.col.plot .chart-box,
.col.plot canvas {
  width: 100%;
  height: 100%;
  display: block;
}

/* columna derecha: tabla con scroll propio */
.col.table-side {
  display: flex;
  flex-direction: column;
  min-width: 280px;
}

/* el contenedor scrolleable de la tabla */
.table-scroll {
  overflow-y: auto;
  /* max-height se setea por JS segÃºn la altura real del grÃ¡fico */
  border-radius: 8px;
}

/* header pegajoso de la tabla */
.table.sticky-head thead th {
  position: sticky;
  top: 0;
  z-index: 1;
  background: rgba(255,255,255,.06); /* coherente con tu tema */
  backdrop-filter: blur(2px);
}

/* compactado suave de filas */
.table.compact tbody tr td {
  padding-top: 6px;
  padding-bottom: 6px;
}

/* opcional: barra de scroll sutil */
.table-scroll::-webkit-scrollbar {
  width: 8px;
}
.table-scroll::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,.15);
  border-radius: 6px;
}

/* === Layout espejo: TABLA (izq) + GRAFICO (der) === */
.row-table-plot{
  display: grid;
  grid-template-columns: minmax(260px, 420px) minmax(420px, 1fr); /* tabla angosta + grafico ancho */
  gap: 16px;
  align-items: start;
}

/* El grÃ¡fico no empuja el layout */
.row-table-plot .plot { min-width: 0; }

/* Alto del grÃ¡fico (usÃ¡ el mismo que venÃ­s usando) */
.row-table-plot .plot canvas{
  width: 100% !important;
  height: 320px !important; /* si preferÃ­s 300/360, cambialo acÃ¡ */
}

/* La tabla scrollea sola (ya tenÃ©s .table-scroll, esto es por si lo necesitÃ¡s especÃ­fico) */
#tableScrollPros { overflow: auto; }

/* Responsive: apila cuando la pantalla es angosta */
@media (max-width: 1100px){
  .row-table-plot{ grid-template-columns: 1fr; }
}


/* Opcional: deja los cards sin desbordes visibles */
.card{ overflow: hidden; }
.kpi{display:flex;flex-direction:column;gap:6px}
.kpi .label{color:var(--muted);font-size:12px}
.kpi .value{font-size:28px;font-weight:700}
.kpi .sub{color:var(--muted);font-size:12px}
.card h3{margin:0 0 8px;font-size:14px;color:var(--muted);font-weight:600;letter-spacing:.2px}
table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid var(--line);text-align:left}
th{color:var(--muted);font-weight:600;font-size:12px}
tr:hover td{background:#121a2b}
.toolbar{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:10px}
input[type="text"],select{background:#0e1524;border:1px solid var(--line);color:var(--fg);padding:8px 10px;border-radius:10px}
.notice{background:#0e1524;border:1px dashed #2a3b5f;border-radius:12px;padding:10px 12px;color:#a9b7d0}
.view.hidden{display:none}
